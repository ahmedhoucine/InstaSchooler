<div class="container">
  <h1>Plannings</h1>

  <!-- Create Planning Section -->
  <div class="section">
    <h2>Create New Planning</h2>
    <form (ngSubmit)="createPlanning()">
      <div class="form-group">
        <div>
          <label for="niveau">Niveau:</label>
          <select id="niveau" [(ngModel)]="newPlanningLevel" name="niveau" required>
            <option value="1">Niveau 1</option>
            <option value="2">Niveau 2</option>
            <option value="3">Niveau 3</option>
            <option value="4">Niveau 4</option>
          </select>
        </div>
        <div>
          <label for="file">File:</label>
          <input type="file" (change)="onFileSelected($event)" required />
        </div>
      </div>
      <button type="submit" [disabled]="loading">Create Planning</button>
    </form>
  </div>

  <!-- Update Planning Section -->
  <div *ngIf="selectedPlanning" class="section">
    <h2>Update Planning: {{ selectedPlanning.filename }}</h2>
    <form (ngSubmit)="updatePlanning()">
      <div class="form-group">
        <div>
          <label for="update-niveau">Niveau:</label>
          <select id="update-niveau" [(ngModel)]="newPlanningLevel" name="niveau" required>
            <option value="1">Niveau 1</option>
            <option value="2">Niveau 2</option>
            <option value="3">Niveau 3</option>
            <option value="4">Niveau 4</option>
          </select>
        </div>
        <div>
          <label for="update-file">File:</label>
          <input type="file" (change)="onFileSelected($event)" />
        </div>
      </div>
      <button type="submit" [disabled]="loading">Update Planning</button>
      <button type="button" (click)="resetForm()">Cancel</button>
    </form>
  </div>

  <!-- Planning List -->
  <div class="section">
    <h2>All Plannings</h2>
    <ul>
      <li *ngFor="let planning of plannings">
        <div>
          <p>{{ planning.filename }} (Niveau {{ planning.niveau }})</p>
          <div>
            <button (click)="selectPlanning(planning)">Edit</button>
            <button (click)="deletePlanning(planning.id)">Delete</button>
          </div>
        </div>
      </li>
    </ul>
  </div>
</div>
